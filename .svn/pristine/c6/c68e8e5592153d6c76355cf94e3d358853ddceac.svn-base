/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/9.0.0.M22
 * Generated at: 2022-05-10 06:58:08 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.riskv3.report;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import risk.util.ConfigUtil;
import java.util.ArrayList;
import risk.util.ParseRequest;
import risk.util.StringUtil;
import risk.issue.IssueReportMgr;
import risk.issue.IssueReportBean;
import risk.util.PageIndex;
import risk.issue.IssueReportBean;
import risk.util.*;
import java.net.URLEncoder;
import risk.namo.NamoMime;

public final class pop_005freport_005feditform_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(1);
    _jspx_dependants.put("/riskv3/report/../inc/sessioncheck.jsp", Long.valueOf(1651044823347L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("risk.util");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("risk.util.PageIndex");
    _jspx_imports_classes.add("risk.namo.NamoMime");
    _jspx_imports_classes.add("java.net.URLEncoder");
    _jspx_imports_classes.add("risk.util.ConfigUtil");
    _jspx_imports_classes.add("risk.util.ParseRequest");
    _jspx_imports_classes.add("risk.issue.IssueReportBean");
    _jspx_imports_classes.add("risk.issue.IssueReportMgr");
    _jspx_imports_classes.add("java.util.ArrayList");
    _jspx_imports_classes.add("risk.util.StringUtil");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET POST or HEAD");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

//@ page contentType="text/html; charset=euc-kr"

    
	String SS_M_NO = (String)session.getAttribute("SS_M_NO")   == null ? "": (String)session.getAttribute("SS_M_NO")  ;
    String SS_M_ID = (String)session.getAttribute("SS_M_ID")   == null ? "": (String)session.getAttribute("SS_M_ID")  ;
    String SS_M_NAME = (String)session.getAttribute("SS_M_NAME") == null ? "": (String)session.getAttribute("SS_M_NAME");
    String SS_MG_NO = (String)session.getAttribute("SS_MG_NO")  == null ? "": (String)session.getAttribute("SS_MG_NO") ;
	String SS_TITLE = (String)session.getAttribute("SS_TITLE")  == null ? "": (String)session.getAttribute("SS_TITLE");
    String SS_URL =   (String)session.getAttribute("SS_URL")    == null ? "": (String)session.getAttribute("SS_URL") ;
    String SS_M_DEPT =   (String)session.getAttribute("SS_M_DEPT")    == null ? "": (String)session.getAttribute("SS_M_DEPT") ;    
    String SS_M_IP =   (String)session.getAttribute("SS_M_IP")    == null ? "": (String)session.getAttribute("SS_M_IP") ;    
    String SS_M_MAIL =   (String)session.getAttribute("SS_M_MAIL")    == null ? "": (String)session.getAttribute("SS_M_MAIL") ;    
	String SS_M_ORGVIEW_USEYN = (String)session.getAttribute("SS_M_ORGVIEW_USEYN")    == null ? "": (String)session.getAttribute("SS_M_ORGVIEW_USEYN") ;    
	String SS_ML_URL = javax.servlet.http.HttpUtils.getRequestURL(request).toString();
	
	String SS_SEARCHDATE = (String)session.getAttribute("SS_SEARCHDATE")    == null ? "": (String)session.getAttribute("SS_SEARCHDATE") ;
	
	
    

	if ((SS_M_ID.equals("")) || !SS_M_IP.equals(request.getRemoteAddr()) ) {
		ConfigUtil cu = new ConfigUtil();
		out.print("<SCRIPT Language=JavaScript>");
		//out.print("window.setTimeout( \" top.document.location = "+cu.getConfig("URL")+"'riskv3/error/sessionerror.jsp' \") ");
		out.print("top.document.location = '"+cu.getConfig("URL")+"risk/sessionerror.jsp'");
        out.print("</SCRIPT>");
    }
	


	ParseRequest pr = new ParseRequest(request);
	pr.printParams();
	ConfigUtil cu = new ConfigUtil();
	DateUtil du = new DateUtil();
	StringUtil su = new StringUtil();
	NamoMime namoMime = new NamoMime();
	
	String mode = pr.getString("mode","insert");
	String reportType = pr.getString("reportType");
	String nowPage = pr.getString("nowPage","1");
	
	String url = "";
	String param = "";
	//브랜드, 사이트 출처관련 코드
	String typeCode = "";
	String codeName = "";
	String i_seq = "";
	String ir_seq = "";
	String mi_Report = ""; // 주요이슈
	String d_Report = ""; // 일반
	String ir_html = "";
	String ir_title = null;
	String ir_type = null;
	String ir_sdate = null;
	String ir_edate = null;
	String ir_stime = null;
	String ir_etime = null;
	String today = null;
	String id_seq = null;
	String check_no  = null;
	String[] arrI_seq = null;
	
	String tm_id_seqs = "";
	String group_id_seqs = "";
	String rel_id_seqs = "";
	String ic_codes = "";
	
	String reply_id_seqs = "";
	String reply_count = "";
	
	String sixMonthCount = "";
	
	//이미지 경로
	String siteUrl = cu.getConfig("URL");
	String imgUrl = siteUrl + "crosseditor/upload";
	
	if(mode.equals("update")){
		
		IssueReportMgr irMgr = new IssueReportMgr();
		IssueReportBean irBean = new IssueReportBean();
		
		ir_type = pr.getString("ir_type","");
		ir_seq = pr.getString("ir_seq");
		irBean = irMgr.getReportBean(ir_seq);	
		ir_html = irBean.getIr_html();
	}else{
						
		//이미지 경로
		//String imgUrl;
		//String siteUrl = cu.getConfig("URL");
				
		//보고서 종류
		ir_type = pr.getString("ir_type","");		
		
		id_seq = pr.getString("id_seq");	
		i_seq = pr.getString("i_seq","");
		ir_title = pr.getString("ir_title","");
		
		//사이트그룹 관련
		String sg_seq = pr.getString("sg_seq","");
			
		//보고서 날짜
		
		ir_sdate = pr.getString("ir_sdate");
		ir_edate = pr.getString("ir_edate");
		
		ir_stime = pr.getString("ir_stime");
		ir_etime = pr.getString("ir_etime");
		
		//시간값 자릿수에 따른 처리
		if(ir_stime.length()==1){
			ir_stime = "0"+ir_stime+":00:00";
		}else if(ir_stime.length()==2){
			ir_stime = ir_stime+":00:00";
		}
		
		if(ir_etime.length()==1){
			ir_etime = "0"+ir_etime+":59:59";
		}else if(ir_etime.length()==2){
			ir_etime = ir_etime+":59:59";
		}
		
		
		if(ir_type.equals("U")){
			url = siteUrl + "riskv3/report/issue_report_form_issue.jsp";
			param = "id_seq="+id_seq;
			System.out.println(url+"?"+param);
			ir_html = su.encodingRequestPageByPost(url +"?"+param ,"utf-8");
		}else if(ir_type.equals("D2")){
			
			tm_id_seqs = pr.getString("tm_id_seqs");
			/*
			group_id_seqs = pr.getString("group_id_seqs");
			rel_id_seqs = pr.getString("rel_id_seqs");
			reply_id_seqs = pr.getString("reply_id_seqs");
			reply_count = pr.getString("reply_count");
			sixMonthCount = pr.getString("sixMonthCount");
			*/
			String chart1 = pr.getString("chart1", "");
			String chart2 = pr.getString("chart2", "");

			url = siteUrl+"riskv3/report/report_form_daily_bing.jsp";
			param = "ir_type="+ir_type+"&ir_sdate="+ir_sdate+"&ir_edate="+ir_edate+"&ir_stime="+ir_stime+"&ir_etime="+ir_etime;
			param +="&id_seqs=" + tm_id_seqs;
			param +="&chart1="+chart1+"&chart2="+chart2;

			System.out.println(url+"?"+param);
			ir_html = su.encodingRequestPageByPost(url +"?"+param ,"utf-8");
		}
	}
	
	//최종 특수문자 태그 처리
	ir_html = su.ChangeString(ir_html.trim());	
	

      out.write(_jspx_char_array_0);
      out.print(SS_TITLE);
      out.write(_jspx_char_array_1);

	if(reportType.equals("1")){

      out.write(_jspx_char_array_2);

	}else if(reportType.equals("2")){

      out.write(_jspx_char_array_3);
      out.print(imgUrl);
      out.write(_jspx_char_array_4);
		
	}

      out.write(_jspx_char_array_5);
      out.print(mode);
      out.write(_jspx_char_array_6);
      out.print(pr.getString("ir_title",""));
      out.write(_jspx_char_array_7);
      out.print(ir_type);
      out.write(_jspx_char_array_8);
      out.print(ir_html);
      out.write(_jspx_char_array_9);
      out.print(ir_seq);
      out.write(_jspx_char_array_10);
      out.print(reportType);
      out.write(_jspx_char_array_11);
      out.print(ir_seq);
      out.write(_jspx_char_array_12);
      out.print(ir_seq);
      out.write(_jspx_char_array_13);
      out.print(id_seq);
      out.write(_jspx_char_array_14);
      out.print(nowPage);
      out.write(_jspx_char_array_15);
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
  static char[] _jspx_char_array_0 = "<html>\r\n<title>".toCharArray();
  static char[] _jspx_char_array_1 = "</title>\r\n<script type=\"text/javascript\" src=\"../../crosseditor/js/namo_scripteditor.js\"></script>\r\n<script type=\"text/JavaScript\">\r\n	function saveReport()\r\n	{\r\n		var f = document.fSend;\r\n		\r\n		if(f.reportType.value == \"1\"){\r\n			if(document.Wec.MIMEValue){\r\n				f.ir_html.value = document.Wec.MIMEValue;\r\n				f.IEuse.value = 'Y';\r\n			}else{\r\n				f.IEuse.value = 'N';\r\n			}	\r\n		}else if(f.reportType.value == \"2\"){\r\n			\r\n			f.ir_html.value = CrossEditor.GetValue();\r\n			\r\n		}\r\n		\r\n		f.action = 'issue_report_prc.jsp';\r\n		f.target = 'processFrm';\r\n		f.submit();\r\n	}\r\n</script>\r\n".toCharArray();
  static char[] _jspx_char_array_2 = "<SCRIPT language=\"javascript\" src=\"/namo/NamoWec7.js\"></SCRIPT>			\r\n<SCRIPT language=\"JScript\" FOR=\"Wec\" EVENT=\"OnInitCompleted()\">\r\n			  var form = document.fSend;				\r\n			  var wec = document.Wec;\r\n			  wec.Value = form.ir_html.value;				  	 \r\n</SCRIPT>\r\n".toCharArray();
  static char[] _jspx_char_array_3 = "<script type=\"text/javascript\">\r\n\r\n		var CrossEditor = new NamoSE(\"namo\");\r\n		CrossEditor.params.ImageSavePath =  '".toCharArray();
  static char[] _jspx_char_array_4 = "';\r\n		CrossEditor.params.Font = {\"Gulim\":\"굴림\",\"Gungsuh\":\"궁서\",\"Dotum\":\"돋움\",\"Malgun Gothic\":\"맑은 고딕\",\"Batang\":\"바탕\"\r\n				,\"Arial\":\"Arial\",\"Courier New\":\"Courier New\",\"David\":\"David\",\"MS PGothic\":\"MS PGothic\",\"New MingLiu\":\"New MingLiu\"\r\n				,\"Simplified Arabic\":\"Simplified Arabic\",\"simsun\":\"simsun\",\"Tahoma\":\"Tahoma\",\"Times New Roman\":\"Times New Roman\",\"Verdana\":\"Verdana\"};\r\n		CrossEditor.EditorStart();\r\n		function OnInitCompleted(e){\r\n		  e.editorTarget.SetValue(document.fSend.ir_html.value); // 컨텐츠 내용 에디터에 삽입\r\n		}\r\n\r\n		</script>\r\n		\r\n".toCharArray();
  static char[] _jspx_char_array_5 = "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\r\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n<body leftmargin=\"0\" topmargin=\"0\" marginwidth=\"0\" marginheight=\"0\">\r\n<iframe id=\"processFrm\" name =\"processFrm\" width=\"0\" height=\"0\" ></iframe>\r\n<form name=\"fSend\" id=\"fSend\" method=\"post\">\r\n<input type=\"hidden\" name=\"mode\" value=\"".toCharArray();
  static char[] _jspx_char_array_6 = "\">\r\n<input type=\"hidden\" name=\"ir_title\" value=\"".toCharArray();
  static char[] _jspx_char_array_7 = "\">\r\n<input type=\"hidden\" name=\"ir_type\" value=\"".toCharArray();
  static char[] _jspx_char_array_8 = "\">\r\n<input type=\"hidden\" name=\"ir_html\" value=\"".toCharArray();
  static char[] _jspx_char_array_9 = "\">\r\n<input type=\"hidden\" name=\"ir_seq\" value=\"".toCharArray();
  static char[] _jspx_char_array_10 = "\">\r\n<input type=\"hidden\" name=\"reportType\" value=\"".toCharArray();
  static char[] _jspx_char_array_11 = "\">\r\n<input type=\"hidden\" name=\"IEuse\" value=\"Y\">\r\n<input type=\"hidden\" name=\"reply_id_seqs\" value=\"".toCharArray();
  static char[] _jspx_char_array_12 = "\">\r\n<input type=\"hidden\" name=\"reply_count\" value=\"".toCharArray();
  static char[] _jspx_char_array_13 = "\">\r\n<input type=\"hidden\" name=\"id_seq\" value=\"".toCharArray();
  static char[] _jspx_char_array_14 = "\">\r\n<input type=\"hidden\" name=\"nowPage\" value=\"".toCharArray();
  static char[] _jspx_char_array_15 = "\">\r\n\r\n<table width=\"730\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\r\n	<tr>\r\n		<td height=\"10\"></td>\r\n	</tr>\r\n	<tr>\r\n		<td align=\"right\">\r\n			<img src=\"../../images/report/btn_save2.gif\"  hspace=\"5\" onclick=\"saveReport();\" style=\"cursor:pointer;\">&nbsp;<img src=\"../../images/report/btn_cancel.gif\" onClick=\"window.close();\" style=\"cursor:pointer;\">&nbsp;&nbsp;\r\n		</td>\r\n	</tr>\r\n	<tr>\r\n		<td height=\"5\"></td>\r\n	</tr>\r\n</table>\r\n</form>\r\n</body>    \r\n</html>".toCharArray();
}
